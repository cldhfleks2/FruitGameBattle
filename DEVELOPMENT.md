# 📝 개발 계획 및 진행 상황

## 🎯 프로젝트 목표
실시간 온라인 멀티플레이가 가능한 수박게임을 Spring Boot + Vue.js 기반으로 개발

## 📅 개발 일정 (총 3주)

### Phase 1: 기본 멀티플레이어 구현 (1주차)
#### 목표: 2명이 실시간으로 대전할 수 있는 기본 시스템 구축

- [ ] **Backend 기본 구조 설정**
  - [ ] Spring Boot 프로젝트 생성 및 기본 설정
  - [ ] WebSocket(STOMP) 설정
  - [ ] MyBatis 연동 및 DB 스키마 설계
  - [ ] JWT 인증 시스템 구현

- [ ] **Frontend 기본 구조 설정**
  - [ ] Vue.js 프로젝트 생성 (Vite)
  - [ ] Matter.js 통합 및 기본 게임 로직 구현
  - [ ] STOMP 클라이언트 설정
  - [ ] Pinia 스토어 구조 설계

- [ ] **실시간 통신 구현**
  - [ ] WebSocket 연결 관리
  - [ ] 게임 상태 동기화 프로토콜 설계
  - [ ] 실시간 게임 데이터 전송 최적화
  - [ ] 연결 끊김 처리 및 재연결 로직

- [ ] **기본 매칭 시스템**
  - [ ] 방 생성/참가 기능
  - [ ] 플레이어 매칭 로직
  - [ ] 게임 시작/종료 처리

### Phase 2: 게임 모드 구현 (2주차)
#### 목표: 다양한 게임 모드 추가 및 게임성 향상

- [ ] **베이직 모드 (기본 게임 모드)**
  - [ ] 독립된 게임판 시스템
  - [ ] 실시간 게임 진행 및 상대방 관전
  - [ ] 게임 오버 시 개별 재시작
  - [ ] 무제한 플레이 (시간 제한 없음)
  - [ ] 최고 점수 갱신 시스템

- [ ] **시간 제한 대결 모드**
  - [ ] 3분 타이머 시스템
  - [ ] 점수 계산 로직
  - [ ] 승패 판정 시스템
  - [ ] 결과 화면 UI

- [ ] **턴제 모드**
  - [ ] 턴 관리 시스템
  - [ ] 10초 턴 타이머
  - [ ] 턴 전환 애니메이션
  - [ ] 공동 게임판 상태 관리

- [ ] **배틀 모드**
  - [ ] 공격 아이템 시스템 설계
  - [ ] 방어막 메커니즘
  - [ ] 특수 과일 효과 구현
  - [ ] 콤보 시스템

- [ ] **UI/UX 개선**
  - [ ] 분할 화면 레이아웃
  - [ ] 게임 모드 선택 화면
  - [ ] 실시간 점수/상태 표시
  - [ ] 애니메이션 효과 추가

### Phase 3: 고도화 및 최적화 (3주차)
#### 목표: 안정성 향상 및 부가 기능 구현

- [ ] **매칭메이킹 시스템 개선**
  - [ ] ELO 레이팅 시스템
  - [ ] 스킬 기반 매칭
  - [ ] 대기 큐 관리
  - [ ] 지역 기반 매칭 (핑 최적화)

- [ ] **리더보드 시스템**
  - [ ] 전체 랭킹
  - [ ] 주간/월간 랭킹
  - [ ] 친구 랭킹
  - [ ] 통계 데이터 수집

- [ ] **리플레이 시스템**
  - [ ] 게임 데이터 녹화
  - [ ] 리플레이 재생 기능
  - [ ] 하이라이트 자동 생성
  - [ ] 공유 기능

- [ ] **성능 최적화**
  - [ ] WebSocket 메시지 압축
  - [ ] 게임 상태 델타 전송
  - [ ] Redis 캐싱 적용
  - [ ] 프론트엔드 번들 최적화

## 🔧 기술적 구현 세부사항

### Backend 아키텍처
```
┌─────────────────────────────────────────┐
│            Load Balancer (Nginx)         │
└─────────────┬───────────────────────────┘
              │
┌─────────────▼───────────────────────────┐
│         Spring Boot Application         │
│  ┌─────────────────────────────────┐   │
│  │     WebSocket Handler (STOMP)    │   │
│  └─────────────┬───────────────────┘   │
│                │                        │
│  ┌─────────────▼───────────────────┐   │
│  │      Game Service Layer          │   │
│  └─────────────┬───────────────────┘   │
│                │                        │
│  ┌─────────────▼───────────────────┐   │
│  │    MyBatis Mapper Layer          │   │
│  └─────────────┬───────────────────┘   │
└────────────────┼────────────────────────┘
                 │
    ┌────────────▼────────────┐
    │   MySQL    │    Redis    │
    └─────────────────────────┘
```

### 실시간 통신 프로토콜

#### WebSocket 엔드포인트

#### 메시지 형식
```json
{
  
}
```

### 데이터베이스 스키마

#### users 테이블
```sql
CREATE TABLE users (
    
);
```

#### game_records 테이블
```sql
CREATE TABLE game_records (

);
```

## 🚨 주요 기술적 과제

### 1. 실시간 동기화
- **문제**: 네트워크 지연으로 인한 게임 상태 불일치
- **해결 방안**:
  - [ ] 클라이언트 예측 (Client-side Prediction)
  - [ ] 서버 권위 모델 (Server Authoritative)
  - [ ] 상태 보간 (State Interpolation)
  - [ ] 델타 압축 (Delta Compression)

### 2. 물리 엔진 동기화
- **문제**: Matter.js 물리 시뮬레이션 결과 불일치
- **해결 방안**:
  - [ ] 서버에서 중요 물리 계산 수행
  - [ ] 결정론적 물리 시뮬레이션
  - [ ] 주기적 상태 스냅샷 동기화

### 3. 확장성
- **문제**: 동시 접속자 증가 시 성능 저하
- **해결 방안**:
  - [ ] 게임 서버 수평 확장
  - [ ] Redis Pub/Sub 활용
  - [ ] 게임 룸 단위 샤딩
  - [ ] WebSocket 연결 풀링

## 📊 진행 상황 추적

### 주간 마일스톤
- **1주차**: Backend/Frontend 기본 구조 완성, WebSocket 통신 구현
- **2주차**: 3가지 게임 모드 구현 완료
- **3주차**: 매칭 시스템, 리더보드, 최적화 완료

### 일일 체크리스트
- [ ] 코드 리뷰 및 리팩토링
- [ ] 단위 테스트 작성
- [ ] 통합 테스트 수행
- [ ] 문서 업데이트
- [ ] 진행 상황 기록

## 🧪 테스트 계획

### 단위 테스트
- Service Layer 테스트 (JUnit)
- WebSocket Handler 테스트
- Vue Component 테스트 (Vitest)

### 통합 테스트
- API 엔드포인트 테스트
- WebSocket 연결 테스트
- 게임 플로우 E2E 테스트

### 성능 테스트
- 동시 접속 부하 테스트 (JMeter)
- WebSocket 메시지 처리량 테스트
- 네트워크 지연 시뮬레이션

## 🚀 배포 계획

### 개발 환경
- Local 개발 서버
- Hot Reload 지원
- Mock 데이터 사용

### 스테이징 환경
- AWS EC2 t3.medium
- Docker Compose 배포
- 실제 DB 연동

### 프로덕션 환경
- AWS ECS 또는 EKS
- RDS MySQL
- ElastiCache Redis
- CloudFront CDN

## 📈 성공 지표

| 지표 | 목표 | 현재 상태 |
|------|------|-----------|
| 동시 접속자 | 100명 | - |
| 평균 응답 시간 | < 50ms | - |
| WebSocket 지연 | < 100ms | - |
| 매치 성사율 | > 90% | - |
| 일일 활성 유저 | 1,000명 | - |

## 🔗 관련 문서
- [API 문서](docs/API.md)
- [WebSocket 프로토콜](docs/WEBSOCKET.md)
- [게임 규칙](docs/GAME_RULES.md)
- [배포 가이드](docs/DEPLOYMENT.md)

---

*최종 업데이트: 2025년 8월*